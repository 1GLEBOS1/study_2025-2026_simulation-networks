---
## Author
author:
  name: –ü–æ–ª—è–∫–æ–≤ –ì–ª–µ–± –°–µ—Ä–≥–µ–µ–≤–∏—á
  orcid: 0000-0002-0877-7063
  affiliation:
    - name: –†–æ—Å—Å–∏–π—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –¥—Ä—É–∂–±—ã –Ω–∞—Ä–æ–¥–æ–≤
      country: –†–æ—Å—Å–∏–π—Å–∫–∞—è –§–µ–¥–µ—Ä–∞—Ü–∏—è
      postal-code: 117198
      city: –ú–æ—Å–∫–≤–∞
      address: —É–ª. –ú–∏–∫–ª—É—Ö–æ-–ú–∞–∫–ª–∞—è, –¥. 6

## Title
title: "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ 6"
subtitle: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ —Å –ø–æ–º–æ—â—å—é Token Bucket Filter"
license: "CC BY"
---

# –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–û—Å–Ω–æ–≤–Ω–æ–π —Ü–µ–ª—å—é —Ä–∞–±–æ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ —Ä–∞–±–æ—Ç—ã –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ Token Bucket Filter, –∫–æ—Ç–æ—Ä–∞—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –≤ Mininet.

# –ó–∞–¥–∞–Ω–∏–µ

1. –ó–∞–¥–∞–π—Ç–µ —Ç–æ–ø–æ–ª–æ–≥–∏—é (—Ä–∏—Å. 6.3), —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ –¥–≤—É—Ö —Ö–æ—Å—Ç–æ–≤ –∏ –¥–≤—É—Ö –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–≤ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é mininet —Å–µ—Ç—å—é 10.0.0.0/8.
2. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏ —Å –ø–æ–º–æ—â—å—é TBF –≤ —ç–º—É–ª–∏—Ä—É–µ–º–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏.
3. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é TBF –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏.

# –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ

Token Bucket Filter (TBF) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ —Å–µ—Ç—è—Ö —Å –∫–æ–º–º—É—Ç–∞—Ü–∏–µ–π –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (—Ä–∏—Å. 6.1). –ü–µ—Ä–µ–¥–∞—á–∞ –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –≤ –æ—á–µ—Ä–µ–¥—å —Å–∏—Å—Ç–µ–º—ã (queque) –ø–∞–∫–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –±—É—Ñ–µ—Ä–µ (bucket) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —á–∏—Å–ª–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É (–∏–ª–∏ —Ç–æ–∫–µ–Ω–æ–≤). –¢–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –≤–∏–¥–µ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ —á–∏—Å–ª–∞ –±–∞–π—Ç–æ–≤, –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –≤ –±—É—Ñ–µ—Ä (–∫–æ—Ä–∑–∏–Ω—É)
—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é.
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ—á–µ—Ä–µ–¥–∏ —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø—Ä–∏–±—ã—Ç–∏—è –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—É—Ñ–µ—Ä —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É ùëÅ –µ–¥–∏–Ω–∏—Ü –¥–∞–Ω–Ω—ã—Ö. –û—á–µ—Ä–µ–¥–Ω–æ–π –ø–∞–∫–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —á–∏—Å–ª–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –æ–±—ä—ë–º –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω —Ä–∞–∑–º–µ—Ä—É –ø–∞–∫–µ—Ç–∞. –ï—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –Ω–∞ –ø–µ—Ä–µ–¥–∞—á—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —á–∏—Å–ª–æ —Ç–æ–∫–µ–Ω–æ–≤ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞, –∞ –ø–∞–∫–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è. –ï—Å–ª–∏ –ø–∞–∫–µ—Ç –ø–æ—Å—Ç—É–ø–∏—Ç –≤ –æ—á–µ—Ä–µ–¥—å —Å–∏—Å—Ç–µ–º—ã –∏ –Ω–µ –±—É–¥–µ—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π, —Ç–æ —Ç–æ–∫–µ–Ω—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞, –∞ —Å–∞–º –ø–∞–∫–µ—Ç –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–±—Ä–æ—à–µ–Ω, –ø–æ—Å—Ç–∞–≤–ª–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω, –Ω–æ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —É—Å–ª–æ–≤–∏—è–º –ø–µ—Ä–µ–¥–∞—á–∏.
–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ TBF —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –≤–∏–¥–µ –±—É—Ñ–µ—Ä–∞ (queue), –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞–ø–æ–ª–Ω—è—é—â–µ–≥–æ—Å—è —Ç–æ–∫–µ–Ω–∞–º–∏ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –ù–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –±—É—Ñ–µ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –µ–≥–æ —Ä–∞–∑–º–µ—Ä, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö—Ä–∞–Ω–∏–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.
–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–±—ã–≤–∞—é—Ç —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é, —Ä–∞–≤–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤, —Ç–æ –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ç–æ–∫–µ–Ω –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ—á–µ—Ä–µ–¥—å –±–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏.
–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–±—ã–≤–∞—é—Ç —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é, –º–µ–Ω—å—à–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤, —Ç–æ –ª–∏—à—å —á–∞—Å—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ –±—É–¥–µ—Ç —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å—Å—è, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ —Å—Ç–∞–Ω—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è –¥–æ —Ä–∞–∑–º–µ—Ä–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞. –î–∞–ª–µ–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –≤—Å–ø–ª–µ—Å–∫–∞—Ö, –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é, –ø—Ä–µ–≤—ã—à–∞—é—â–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–µ–±—ã–≤–∞—é—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤.
–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–±—ã–≤–∞—é—Ç –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Ç–æ–∫–µ–Ω—ã,—Ç–æ –≤ –±—É—Ñ–µ—Ä–µ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Ç–æ–∫–µ–Ω–æ–≤, —á—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–∞ —Å–∏—Ç—É–∞—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ–º¬ª. –ï—Å–ª–∏ –ø–∞–∫–µ—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å, —Ç–æ —Ç–æ–∫–µ–Ω—ã –Ω–∞—á–∏–Ω–∞—é—Ç —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å—Å—è. –î–∞–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—É—é –ø–æ–ª–æ—Å—É –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è. –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –≤—Å–ø–ª–µ—Å–∫–∏, –Ω–æ –ø—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ–º –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è, –∞ –≤ –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ ‚Äî —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å—Å—è.
–ê–ª–≥–æ—Ä–∏—Ç–º TBF –æ–±–ª–∞–¥–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ–º –≤–∑—Ä—ã–≤–æ–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (burstiness), –∫–æ–≥–¥–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ (—Ç. –µ. –Ω–∏–∫–∞–∫–∏–µ –ø–∞–∫–µ—Ç—ã –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç —Ç–æ–∫–µ–Ω—ã) –∏ –Ω–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Ç–æ–∫–µ–Ω—ã —Å—Ä–∞–∑—É, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –í—Å–ø–ª–µ—Å–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É, –∏–ª–∏ –∫–∞–∫ —Ä–∞–∑–º–µ—Ä (—ë–º–∫–æ—Å—Ç—å) –∫–æ—Ä–∑–∏–Ω—ã. –î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –≤—Å–ø–ª–µ—Å–∫–∞–º–∏ –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –µ—â—ë –æ–¥–Ω–∞ –∫–æ—Ä–∑–∏–Ω–∞, —Å —Ä–∞–∑–º–µ—Ä–æ–º, —Ä–∞–≤–Ω—ã–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –¥–∞–Ω–Ω—ã—Ö (Maximum Transmission Unit, MTU). –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —ç—Ç–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é (peak rate ‚Äî –ø–∏–∫–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å).
–û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å tbf, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å tc –≤ Linux:
    1 tc qdisc [add | ...] dev [dev_id] root tbf limit [BYTES] burst [BYTES] rate [BPS] [mtu BYTES] [ peakrate BPS ] [latency TIME ]

–ó–¥–µ—Å—å:
‚Äì tc: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º Linux;
‚Äì qdisc: –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ (qdisc), –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –ø–æ—Ä—è–¥–æ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—Å–ª—É–∂–∏–≤–∞—é—Ç—Å—è –ø–∞–∫–µ—Ç—ã, –ø–æ—Å—Ç—É–ø–∞—é—â–∏–µ —Å –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö IP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞;
‚Äì [add | del | replace | change | show]: –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞–¥ qdisc;
‚Äì dev [dev_id]: –∑–∞–¥–∞—ë—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å;
‚Äì tbf: —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º Token Bucket Filter;
‚Äì limit [BYTES]: —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤ –±–∞–π—Ç–∞—Ö;
‚Äì burst [BYTES]: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É;
‚Äì rate [BPS]: —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–æ–π, —Å –∫–æ—Ç–æ—Ä–æ–π —Ç–æ–∫–µ–Ω—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É;
‚Äì mtu [BYTES]: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –≤ –±–∞–π—Ç–∞—Ö;
‚Äì peakrate [BPS] (–ø–∏–∫–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å [–±–∏—Ç/—Å]): –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞–∫–µ—Ç–∞;
‚Äì latency [TIME]: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞ –≤ –æ—á–µ—Ä–µ–¥–∏.


–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ [—Ç–∞–±–ª. @tbl-std-dir] –ø—Ä–∏–≤–µ–¥–µ–Ω–æ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ Unix.

| –ò–º—è –∫–∞—Ç–∞–ª–æ–≥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞                                                                                                          |
|--------------|----------------------------------------------------------------------------------------------------------------------------|
| `/`          | –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –≤—Å—é —Ñ–∞–π–ª–æ–≤—É—é                                                                               |
| `/bin `      | –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–∞–∫ –≤ –æ–¥–Ω–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, —Ç–∞–∫ –∏ –ø—Ä–∏ –æ–±—ã—á–Ω–æ–π —Ä–∞–±–æ—Ç–µ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º     |
| `/etc`       | –û–±—â–µ—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º                                           |
| `/home`      | –°–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–º–∞—à–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `/media`     | –¢–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–º–µ–Ω–Ω—ã—Ö –Ω–æ—Å–∏—Ç–µ–ª–µ–π                                                                                   |
| `/root`      | –î–æ–º–∞—à–Ω—è—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  `root`                                                                                   |
| `/tmp`       | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã                                                                                                            |
| `/usr`       | –í—Ç–æ—Ä–∏—á–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                                                                 |

: –û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã GNU Linux {#tbl-std-dir}

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ Unix —Å–º. –≤ [@tanenbaum_book_modern-os_ru; @robbins_book_bash_en; @zarrelli_book_mastering-bash_en; @newham_book_learning-bash_en].

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## 6.4.1. –ó–∞–ø—É—Å–∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É —Å mininet.
2. –ò–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –û–° –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
    1 ssh -Y mininet@192.168.x.y
![–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ](image/image_1.png){#fig-001 width=70%}
3. –í –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ mininet –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –∑–∞–ø—É—Å–∫–∞
X-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫—É–∫–∏ (MIT magic cookie)1
—Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è mininet –≤ —Ñ–∞–π–ª –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è root:
    1 mininet@mininet-vm:~$ xauth list $DISPLAY
    2 mininet-vm/unix:10 MIT-MAGIC-COOKIE-1 295acad8e35d17636924c5ab80e8462d
    3 mininet@mininet-vm:~$ sudo -i
    4 root@mininet-vm:~# xauth add mininet-vm/unix:10 MIT-MAGIC-COOKIE-1 295acad8e35d17636924c5ab80e8462d
    5 root@mininet-vm:~# logout
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º mininet.
![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ X-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](image/image_2.png){#fig-002 width=70%}
4. –ó–∞–¥–∞–π—Ç–µ —Ç–æ–ø–æ–ª–æ–≥–∏—é —Å–µ—Ç–∏, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ –¥–≤—É—Ö —Ö–æ—Å—Ç–æ–≤ –∏ –¥–≤—É—Ö –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–≤ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é mininet —Å–µ—Ç—å—é 10.0.0.0/8:
    1 sudo mn --topo=linear,2 -x
![–ó–∞–ø—É—Å–∫ mininet](image/image_3.png){#fig-003 width=70%}
–ü–æ—Å–ª–µ –≤–≤–µ–¥–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è —Ç–µ—Ä–º–∏–Ω–∞–ª—ã –¥–≤—É—Ö —Ö–æ—Å—Ç–æ–≤, –¥–≤—É—Ö –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.
5. –ù–∞ —Ö–æ—Å—Ç–∞—Ö h1, h2 –∏ –Ω–∞ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞—Ö s1, s2 –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ifconfig, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –æ—Ç–Ω–æ—Å—è—â—É—é—Å—è –∫ –∏—Ö —Å–µ—Ç–µ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º –∏–º IP-–∞–¥—Ä–µ—Å–∞–º. –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å NETEM –∏ –∫–æ–º–∞–Ω–¥–æ–π tc –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã h1-eth0, h2-eth0, s1-eth2.
![ifconfig h2](image/image_4.png){#fig-004 width=70%}
![ifconfig h1](image/image_5.png){#fig-005 width=70%}
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏ h1 –∏ h2 —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ping —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º -c 4.
7. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ —Å–µ—Ä–≤–µ—Ä–∞:
    1 iperf3 -s
![–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞](image/image_6.png){#fig-006 width=70%}
8. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h1 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∏–µ–Ω—Ç–∞:
    1 iperf3 -c 10.0.0.2
![–ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞](image/image_7.png){#fig-007 width=70%}
9. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h1 –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h2, –Ω–∞–∂–∞–≤ Ctrl + c. –í –æ—Ç—á—ë—Ç–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ iPerf3 –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.
## 6.4.2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
### 6.4.2.1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ –∫–æ–Ω–µ—á–Ω—ã—Ö —Ö–æ—Å—Ç–∞—Ö
–ö–æ–º–∞–Ω–¥—É tc –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å –∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é —Ñ–∏–ª—å—Ç—Ä–∞ Token Bucket Filter (tbf).
1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ö–æ—Å—Ç–∞ h1, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–∞ 10 –ì–±–∏—Ç/—Å –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ h1-eth0 –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TBF-—Ñ–∏–ª—å—Ç—Ä–∞:
    1 sudo tc qdisc add dev h1-eth0 root tbf rate 10gbit burst 5000000 limit 15000000
![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ h1](image/image_8.png){#fig-008 width=70%}
–ó–¥–µ—Å—å:
- sudo: –≤–∫–ª—é—á–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º–∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏;
- tc: –≤—ã–∑–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–æ–º Linux;
- qdisc: –∏–∑–º–µ–Ω–∏—Ç—å –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É –æ—á–µ—Ä–µ–¥–µ–π —Å–µ—Ç–µ–≤–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞;
- add (–¥–æ–±–∞–≤–∏—Ç—å): —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ;
- dev h1-eth0 root: –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª–æ;
- tbf: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º Token Bucket Filter;
- rate: —É–∫–∞–∑–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ (10 –ì–±–∏—Ç/—Å);
- burst: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –ø–æ–º–µ—Å—Ç–∏—Ç—å—Å—è –≤ –∫–æ—Ä–∑–∏–Ω—É (5 000 000);
- limit: —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –≤ –±–∞–π—Ç–∞—Ö (15 000 000).

2. –§–∏–ª—å—Ç—Ä tbf —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–ø–ª–µ—Å–∫–∞ –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏.
–≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã—Å–æ–∫–∏–º, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å. –û–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–µ –Ω–∏–∂–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã, –¥–µ–ª—ë–Ω–Ω–æ–π –Ω–∞ HZ, –≥–¥–µ HZ ‚Äî —Ç–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —è–¥—Ä–∞, –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∞ —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:
    1 egrep '^CONFIG_HZ_[0-9]+' /boot/config-`uname -r`
![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞](image/image_9.png){#fig-009 width=70%}
–î–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–ø–ª–µ—Å–∫–∞ (burst) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ (10 –ì–±–∏—Ç/—Å –∏–ª–∏ 10 Gbps = 10,000,000,000 bps) —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∑–Ω–∞—á–µ–Ω–∏–µ HZ (–Ω–∞ —Ö–æ—Å—Ç–µ h1 HZ = 250): Burst = 10,000,000,000/250 = 40,000,000 bits = 40,000,000/8 bytes = 5,000,000
bytes.
3. –° –ø–æ–º–æ—â—å—é iPerf3 –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ —Å–µ—Ä–≤–µ—Ä–∞:
    1 iperf3 -s
![–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞](image/image_11.png){#fig-011 width=70%}
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∏–µ–Ω—Ç–∞:
    1 iperf3 -c 10.0.0.2
![–ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞](image/image_10.png){#fig-010 width=70%}
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h1 –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h2, –Ω–∞–∂–∞–≤ Ctrl + c . –í –æ—Ç—á—ë—Ç–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ iPerf3 –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞.
4. –£–¥–∞–ª–∏—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ —Ö–æ—Å—Ç–µ h1:
    1 sudo tc qdisc del dev h1-eth0 root
### 6.4.2.2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞—Ö
–ü—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ s1-eth2 –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ s1 –≤—Å–µ —Å–µ–∞–Ω—Å—ã —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–º s1 –∏ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–º s2 –±—É–¥—É—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.
1. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ tbf —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ rate = 10gbit, burst = 5,000,000, limit= 15,000,000 –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É s1-eth2 –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ s1, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–µ–¥–∏–Ω—è–µ—Ç –µ–≥–æ —Å –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–º s2:
    1 sudo tc qdisc add dev s1-eth2 root tbf rate 10gbit burst 5000000 limit 15000000
    ![–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏](image/image_12.png){#fig-012 width=70%}
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ iperf3 –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è
–ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ —Å–µ—Ä–≤–µ—Ä–∞:
    1 iperf3 -s
![–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞](image/image_14.png){#fig-001 width=70%}
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∏–µ–Ω—Ç–∞:
    1 iperf3 -c 10.0.0.2
![–ó–∞–ø—É—Å–∫ –∫–æ–∏–µ–Ω—Ç–∞](image/image_13.png){#fig-001 width=70%}
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h1 –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h2, –Ω–∞–∂–∞–≤ Ctrl + c . –í –æ—Ç—á—ë—Ç–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ iPerf3 –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞.
3. –£–¥–∞–ª–∏—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–µ s1:
    1 sudo tc qdisc del dev s1-eth2 root

### 6.4.2.3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ NETEM –∏ TBF
NETEM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏, –¥–∂–∏—Ç—Ç–µ—Ä–∞, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ –∏ —Ç.–¥. TBF –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏. –£—Ç–∏–ª–∏—Ç–∞ tc –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π. –ü—Ä–∏ —ç—Ç–æ–º –ø–µ—Ä–≤–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ (qdisc1) –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –º–µ—Ç–∫–µ, –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ —Å–≤–æ–∏–º —Ä–æ–¥–∏—Ç–µ–ª—è–º, —É–∫–∞–∑–∞–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –º–µ—Ç–∫—É.
1. –û–±—ä–µ–¥–∏–Ω–∏—Ç–µ NETEM –∏ TBF, –≤–≤–µ–¥—è –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ s1-eth2 –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ s1 –∑–∞–¥–µ—Ä–∂–∫—É, –¥–∂–∏—Ç—Ç–µ—Ä, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∏ —É–∫–∞–∑–∞–≤ —Å–∫–æ—Ä–æ—Å—Ç—å:
    1 sudo tc qdisc add dev s1-eth2 root handle 1: netem delay 10ms

–ó–¥–µ—Å—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ handle –∑–∞–¥–∞—ë—Ç –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∏–º–µ—é—â–∏–π —Å–º—ã—Å–ª –æ—á–µ—Ä—ë–¥–Ω–æ—Å—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω qdisc.
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç —Ö–æ—Å—Ç–∞ h1 –∫ —Ö–æ—Å—Ç—É h2 –∏–º–µ–µ—Ç –∑–∞–¥–∞–Ω–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É. –î–ª—è —ç—Ç–æ–≥–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ping —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º -c 4 —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ —Ö–æ—Å—Ç–∞ h1.
3. –î–æ–±–∞–≤—å—Ç–µ –≤—Ç–æ—Ä–æ–µ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–µ s1, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–¥–∞—ë—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é tbf —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ rate=2gbit, burst=1,000,000, limit=2,000,000:
    1 sudo tc qdisc add dev s1-eth2 parent 1: handle 2: tbf rate 2gbit burst 1000000 limit 2000000
![–ù–∞—Å—Ç—Ä–æ–π–∫–∞](image/image_15.png){#fig-015 width=70%}
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ iperf3 –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ —Å–µ—Ä–≤–µ—Ä–∞:
    1 iperf3 -s
![–°–µ—Ä–≤–µ—Ä](image/image_17.png){#fig-017 width=70%}
- –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Ö–æ—Å—Ç–∞ h2 –∑–∞–ø—É—Å—Ç–∏—Ç–µ iPerf3 –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∏–µ–Ω—Ç–∞:
    1 iperf3 -c 10.0.0.2
![–ö–ª–∏–µ–Ω—Ç](image/image_16.png){#fig-016 width=70%}
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h1 –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ iPerf3 –Ω–∞ —Ö–æ—Å—Ç–µ h2, –Ω–∞–∂–∞–≤ Ctrl + c . –í –æ—Ç—á—ë—Ç–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ iPerf3 –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞.
5. –£–¥–∞–ª–∏—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–µ s1:
    1 sudo tc qdisc del dev s1-eth2 root

–ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:
![–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 1](image/ping1.png){#fig-001 width=70%}
![–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 2](image/ping2.png){#fig-001 width=70%}
–û–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –¥–∞—ë—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—é ([—Ä–∏—Å. @fig-001]).

# –í—ã–≤–æ–¥—ã

–û–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ —Ä–∞–±–æ—Ç—ã –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –æ—á–µ—Ä–µ–¥–∏ Token Bucket Filter, –∫–æ—Ç–æ—Ä–∞—è —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∏–ª –Ω–∞–≤—ã–∫–∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –≤ Mininet.

# –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã{.unnumbered}

::: {#refs}
:::
